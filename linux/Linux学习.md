ifconfig：查看IP地址

setup：查看系统配置（远程连接服务是否开启sshd）

reboot：重启

cd：表示changedirectory,切换目录

-l：长列表格式

-h：human，人类较好理解的方式

-a：all ，全部包括隐藏文件

### vi和vim编辑器

vi和vim的三种常见模式

6.2.1正常模式

在正常模式下，我们可以使用快捷键。以vim打开一个档案就直接进入一般模式了(这是默认的模式)。在这个模式中，你可以使用『上下左右』按键来移动光标，你可以使用『删除字符』或『删除整行』来处理档案内容，也可以使用『复制、贴上』来处理你的文件数据。

6.2.2插入模式/编辑模式

在模式下，程序员可以输入内容。按下i,I,o,O,a,A,r,R等任何一个字母之后才会进入编辑模式,一般来说按i即可

6.2.3命令行模式

在这个模式当中，可以提供你相关指令，完成读取、存盘、替换、离开vim、显示行号等的动作则是在此模式中达成的

:wq   退出编辑  ！强制执行

：q  查看

![1570434407748](C:\Users\wuhaotian\AppData\Roaming\Typora\typora-user-images\1570434407748.png)



#### 正常模式下的快捷键

1. 复制：正常模式下按yy，再按p，复制五行，5yy，p（光标下）
2. 删除：dd，数字+dd
3. 查找单词：命令行，/+要查字段，n下一个
4. 设置行号：：+set nu，取消 set nonu
5. 到最末行，首行：正常模式，最末行[G]和最首行[gg],
6. 撤销：正常模式，u
7. 去到指定行：正常模式，先设置行号，再输入数字，shift+g

### 开机、重启和用户登录注销

#### 关机&重启命令

基本介绍

shutdown：

1. shutdown-hnow:表示立即关机
2. shutdown-h1:表示1分钟后关机
3. shutdown-rnow:立即重启

halt就是直接使用，效果等价于关机

reboot就是重启系统。

sync：把内存的数据同步到磁盘

#### 用户登录和注销：

1. 登录时尽量少用root帐号登录，因为它是系统管理员，最大的权限，避免操作失误。可以利用普通用户登录，登录后再用”su-用户名’命令来切换成系统管理员身份.
2. 在提示符下输入logout即可注销用户

##### 使用细节

logout注销指令在图形运行级别无效，在运行级别3下有效.

### 用户管理

![1570438284113](C:\Users\wuhaotian\AppData\Roaming\Typora\typora-user-images\1570438284113.png)

添加用户：useradd   [选项]   用户名

添加密码：passwd  用户名

删除用户：

删除用户保留家目录：userdel 用户名

删除用户不保留家目录：userdel -r 用户名

实际开发中：在删除用户时，我们一般不会将家目录删除。

查询用户：id +用户名

切换用户：su - 用户名 ，exit退出（能来回切换）

#### 用户组

类似于角色，系统可以对有共性的多个用户进行统一的管理。

增加：groupadd   组名

删除组：groupdel  组名

增加用户时加上组：useradd -g  用户组  用户名

#### etc下重要的文件

##### passwd文件：

用户（user）的配置文件，记录用户的各种信息

每行的含义：用户名:口令:**用户标识号**:**组标识号**:注释性描述:主目录:登录Shell

```
ht:x:500:500::/home/ht:/bin/bash
wht:x:501:501::/home/wht:/bin/bash

```



##### shadow文件：

口令配置文件（存放密码的）

每行的含义：登录名:**加密口令**:**最后一次修改时间**:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志



##### group文件：

组(group)的配置文件，记录Linux包含的组的信息

每行含义：组名:口令:**组标识号:组内用户列**

ht:x:500:
tiancai:x:501:

### 使用指令：

#### 运行级别说明：

0：关机

1：单用户【找回丢失密码】

2：多用户状态没有网络服务

3：多用户状态有网络服务

4：系统未使用保留给用户

5：图形界面

6：系统重启

常用运行级别是3和5，要修改默认的运行级别可改文件

/etc/inittab的id:5:initdefault:这一行中的数字

切换运行级别：init[012356]

#### 面试题

如何找回root密码，如果我们不小心，忘记root密码，怎么找回。

思路：进入到单用户模式，然后修改root密码。因为进入单用户模式，root不需要密码就可以登录

步骤：开机->在引导时输入回车键->看到一个界面输入e->看到一个新的界面，选中第二行（编辑内核）在输入e->在这行最后输入1,再输入回车键->再次输入b,这时就会进入到单用户模式。这时，我们就进入到单用户模式，使用passwd指令来修改root密码。

### 文件目录类

#### pwd

显示当前工作目录的绝对路径

#### ls

-a：显示目前目录的所有文件和目录，包括隐藏的

-l：以列表的方式显示信息

#### cd

cd  [参数]：切换到指定目录

cd~或者cd：回到自己的家目录

cd..：回到当前目录的上一级目录

#### mkdir

mkdir指令用于创建目录(makedirectory)

mkdir [目录] :创建目录

mkdir -p [目录] :创建多级目录

#### rmdir

删除目录

rmdir [目录]  删除目录（不能删除非空目录）

若想删除非空目录：rm -rf  [目录]

#### touch

创建空文件

touch 文件名称：创建文件（可以一次性创建多个文件）

#### cp

拷贝文件到指定目录

cp [选项] source dest

-r ：递归复制整个文件夹

\cp :强制覆盖

#### rm

删除文件，目录

rm 文件或目录名

-r ：递归删除整个文件

-f：强制删除不提示

#### mv

移动文件和目录或重命名

mv  [原文件名]  [新文件名]

mv  [目录/文件名]  [目录]

#### cat

只读的方式查看文件

-n ：显示行号

cat -n 文件 |more ：分页显示（不想看了就按q）

|less ：分页显示，跟more不同的是，不是加载完文件才显示的，而是显示部分需要内容  

> > > > > > > #### >和>>
> > > > > > >
> > > > > > > 第一个：输出重定向
> > > > > > >
> > > > > > > 第二个：追加
> > > > > > >
> > > > > > > ls -l  > a.txt,将ls显示的内容写入a.txt,若存在就覆盖a.txt原来的内容
> > > > > > >
> > > > > > > ls  -l  >>  a.txt 将ls显示的内容写入a.txt,若存在就追加内容

cat   b.txt  > a.txt 将b.txt内容写入a.txt,若存在就覆盖a.txt原来的内容

echo "内容" >> a.txt 将字符串内容写入a.txt

#### echo

echo输出内容到控制台

echo [选项][输出内容]

#### head

head用于显示文件的开头部分内容，默认情况下head指令显示文件的前10行内容

head   文件(功能描述：查看文件头10行内容)

head  -n  5   文件(功能描述：查看文件头5行内容，5可以是任意行数)

#### tail

tail用于输出文件中尾部的内容，默认情况下tail指令显示文件的后10行内容

tail   文件名    查看文件尾部10内容

tail   -n   5  文件名 查看文件尾部后5行

**tail   -f   文件名   实时监控文档**（CTRL+C断开）



#### ln

软链接也叫符号链接，类似于windows里的快捷方式，主要存放了链接其他文件的路径

ln    -s    源文件  软链接名（功能描述：给原文件创建一个软链接）

pwd查看还在linkCat下，但是能通过ls查看到cat文件夹的文件

rm   -rf   linkCat (后面不要带/,那样删不掉)

#### history

查看已经执行过历史命令,也可以执行历史指令

！数字，执行编号为该数字的指令



### 时间日期类

#### date

显示当前日期

1. **date（功能描述：显示当前时间）**
2. date   “+%Y”（功能描述：显示当前年份）
3. date  “+%m”（功能描述：显示当前月份）
4. date   “+%d”（功能描述：显示当前是哪一天）
5. date    "+%Y-%m-%d%H:%M:%S"（功能描述：显示年月日时分秒）
6. **date  -s    “2018-10-2 22:22:01” 修改时间**

#### cal

查看日历指令

cal  [选项]  

cal   显示当前月日历

cal   2020  显示2020年一整年的日历

### 查找类

#### find

find指令将从指定目录向下递归地遍历其各个子目录，将满足条件的文件或者目录显示在终端

find [搜索范围]  [选项]

选项：-name 按照指定的文件名 查找模式查找文件

​	-user  查找属于指定用户名的所有文件

​	-size按照文件大小查找文件

​	比如：find  /root -size +20M(+表示大于 -表示小于)

​	查找.txt结尾文件：find /root -name *.txt

##### 全局搜索

```bash
 find / -name *nginx*
```





#### locate

locate指令可以快速定位文件路径。locate指令利用事先建立的系统中所有文件名称及路径的locate数据库实现快速定位给定的文件。Locate指令无需遍历整个文件系统，查询速度较快。为了保证查询结果的准确度，管理员必须定期更新locate时刻。

由于locate指令基于数据库进行查询，所以第一次运行前，必须使用updatedb指令创建locate数据库。

locate 文件名

locate  a.txt:查找出来的不仅是a.txt而且还是



#### grep和管道符号

grep过滤查找，管道符，“|”，表示将前一个命令的处理结果输出传递给后面的命令处理

cat a.txt | grep -ni  a

查找a.txt里的有a字符的行，显示行号，忽略大小写

#### whereis

特别好用

whereis gcc

### 压缩和解压类

#### gzip/gunzip

gzip用于压缩文件，gunzip用于解压的

gzip   文件（功能描述：压缩文件，只能将文件压缩为*.gz文件）(不保留原文件)

gunzip  文件.gz（功能描述：解压缩文件命令）



#### zip/unzip

zip用于压缩文件，unzip用于解压的，这个在项目打包发布中很有用的

zip[选项]XXX.zip将要压缩的内容（功能描述：压缩文件和目录的命令）

unzip[选项]XXX.zip（功能描述：解压缩文件）

zip常用选项：

-r：递归压缩，压缩整个目录

unzip常用选项

-d <目录>：指定解压后文件的存放目录

 zip -r idea.zip /home/：把home文件夹压缩成 idea.zip

unzip -d /root/  idea.zip ：把idea.zip解压root目录下



#### tar

tar指令是打包指令，最后打包后的文件是.tar.gz的文件

tar[选项]XXX.tar.gz打包的内容(功能描述：打包目录，压缩后的文件格式.tar.gz)

常用选项：

-c  ：产生.tar打包文件

-v  ：显示详细信息

-f  ：指定压缩后的文件名

-z  ：打包同时压缩

-x  ：解包.tar文件



tar -zcvf a.tar.gz a1.txt a2.txt   ：压缩多个文件，将a1.txt和a2.txt压缩成a.tar.gz

tar -zxvf a.tar.gz /home/ ：解压文件



## 组管理和权限管理

### 组介绍

在linux中的每个用户必须属于一个组，不能独立于组外。**在linux中每个文件有所有者、所在组、其它组的概念。**

1. 1)所有者
2. 2)所在组
3. 3)其它组
4. 4)改变用户所在的组

### 文件/目录所有者

一般为文件的创建者,谁创建了该文件，就自然的成为该文件的所有者。

#### 查看文件所有者

指令：ls  -ahl

#### 修改文件所有者

指令：chown  用户名  文件名

 chown ht a1.txt 

### 组的创建

groupadd   组名

#### 文件/目录所在组

当某个用户创建了一个文件后，默认这个文件的所在组就是该用户所在的组

##### 查看文件/目录所在组

ls -ahl

##### 修改文件所在的组

指令 ：chgrp  组名   文件名

#### 改变用户所在组

##### 改变用户所在组

1)usermod   –g   组名   用户名

2)usermod    –d   目录名   用户名    ：改变该用户登陆的初始目录。

### 权限的基本介绍

#### ls-l中显示的内容如下：

-rwxrw-r--  1   root   root  1213   Feb  2  09:39  abc

说明

1)第0位确定文件类型(d,-,l,c,b)

2)第1-3位确定所有者（该文件的所有者）拥有该文件的权限。---User

3)第4-6位确定所属组（同用户组的）拥有该文件的权限，---Group

4)第7-9位确定其他用户拥有该文件的权限---Other

5)如果是文件，表示硬连接数目，如果是文件夹，那么表示的是该文件夹的子目录个数（注意：子目录个数包括 . 和 ..  ）

6)第一个root表示文件所有者

7)第二个root表示用户所在组

8)1213表示文件大小（文件夹统一4096（目录是个特殊的文件，即每个目录都占用4096空间），注意：个数包括文件的隐藏字符）

9)Feb 2 09:39 文件最后修改时间

10)abc文件名

#### 文件类型说明

-：普通文件

d：目录

l：软连接

c：字符设备【键盘，鼠标】

b：块文件，硬盘

#### rwx作用到文件

1)[r]代表可读(read):可以读取,查看

2)[w]代表可写(write):可以修改,但是不代表可以删除该文件,删除一个文件的前提条件是对该文件所在的目录有写权限，才能删除该文件.

3)[x]代表可执行(execute):可以被执行



#### rwx作用到目录

1)[r]代表可读(read):可以读取，ls查看目录内容

2)[w]代表可写(write):可以修改,目录内创建+删除+重命名目录

3)[x]代表可执行(execute):可以进入该目录



##### 权限可以用数字表示

r=4，w=2，x=1

 



### 修改权限-chmod

通过chmod指令，可以修改文件或者目录的权限

#### 第一种方式：+、-、=变更权限

u:所有者g:所有组o:其他人a:所有人(u、g、o的总和)

1)chmod   u=rwx,g=rx,o=x  文件目录名

2)chmod   o+w   文件目录名

3)chmod   a-x   文件目录名

#### 第二种方式：通过数字变更权限

r=4   w=2   x=1,rwx=4+2+1=7

chmod    u=rwx,  g=rx,  o=x    文件目录名

相当于chmod  751  文件目录名

### 修改文件所有者-chown

chown -R  newowner    file   改变文件的所有者

chown  -R   newowner:newgroup    file改变用户的所有者和所有组

-R   如果是目录则使其下所有子文件或目录递归生效

### 修改文件所在组-chgrp

chgrp   -R  newgroup   file  改变文件的所有组





## crond任务调度

任务调度：是指系统在某个时间执行的特定的命令或程序。

原理：

![1570519197030](C:\Users\wuhaotian\AppData\Roaming\Typora\typora-user-images\1570519197030.png)

crontab  [选项]

-e 编辑crontab定时任务

-l  查询crontab任务

-r  删除当前用户所有的crontab任务

service crond restart [重启任务调度]

![1570519081199](C:\Users\wuhaotian\AppData\Roaming\Typora\typora-user-images\1570519081199.png)

![1570519093276](C:\Users\wuhaotian\AppData\Roaming\Typora\typora-user-images\1570519093276.png)

![1570519105301](C:\Users\wuhaotian\AppData\Roaming\Typora\typora-user-images\1570519105301.png)

## 磁盘分区、挂载

### 分区的方式

1. mbr分区
2. gtp分区

### Linux分区

1. Linux来说无论有几个分区，分给哪一目录使用，它归根结底就只有一个根目录，一个独立且唯一的文件结构,Linux中每个分区都是用来组成整个文件系统的一部分。
2. Linux采用了一种叫“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来。这时要载入的一个分区将使它的存储空间在一个目录下获得

### 硬盘说明

1)Linux硬盘分IDE硬盘和SCSI硬盘，目前基本上是SCSI硬盘

2)对于IDE硬盘，驱动器标识符为“hdx~”,其中“hd”表明分区所在设备的类型，这里是指IDE硬盘了。“x”为盘号（a为基本盘，b为基本从属盘，c为辅助主盘，d为辅助从属盘）,“~”代表分区，前四个分区用数字1到4表示，它们是主分区或扩展分区，从5开始就是逻辑分区。例，**hda3表示为第一个IDE硬盘上的第三个主分区或扩展分区,hdb2表示为第二个IDE硬盘上的第二个主分区或扩展分区。**

3)对于SCSI硬盘则标识为“sdx~”，SCSI硬盘是用“sd”来表示分区所在设备的类型的，其余则和IDE硬盘的表示方法一样。

![1570520810029](C:\Users\wuhaotian\AppData\Roaming\Typora\typora-user-images\1570520810029.png)

1. 虚拟机添加硬盘
2. 分区   fdisk /dev/sdb
3. 格式化  mkfs  -t   ext4  /dev/sdb1
4. 挂载   先创建一个   /home/newdisk,挂载mount     /dev/sdb1      /home/newdisk
5. 设置可以自动挂载(永久挂载，当你重启系统，仍然可以挂载到/home/newdisk)
6. 可以修改 /etc/fstab ,添加下面这句话
7. /dev/sdb1            /home/newdisk           ext4        defaults     0   0
8. 卸载 umount 设备名  或挂载目录

### 磁盘情况查询

#### df-h

查询磁盘情况

#### du -h  目录

查询指定目录的磁盘占用情况

-s指定目录占用大小汇总

-h带计量单位

-a含文件

--max-depth=1   子目录深度

-c列出明细的同时，增加汇总值

### 磁盘情况-工作实用指令

#### ls  -l /home  | grep "^-" | wc -l

统计/home文件夹下文件的个数

#### ls  -l /home |  grep "^d"  | wc -l

统计/home文件夹下目录的个数

#### ls  -lR /home | grep "^-" |  wc -l

统计/home文件夹下文件的个数，包括子文件夹里的

#### ls  -lR /home | grep "^d" |  wc -l

统计/home文件夹下目录的个数，包括子文件夹里的

#### tree

以树状显示目录结构

#### yum install 插件名

安装插件



## 网络配置

原理图

![1570525965745](C:\Users\wuhaotian\AppData\Roaming\Typora\typora-user-images\1570525965745.png)

### linux网络环境配置

#### 第一种方法(自动获取)

系统->首选项->网络连接->system eth0 ->编辑->自动连接

#### 第二种方法(指定固定的ip)

vim   /etc/sysconfig/network-scripts/ifcfg-eth0

IPADDR=192.168.189.128
GATEWAY=192.168.189.2
DNS1=192.168.189.2

BOOTPROTO=static

ONBOOT=yes



## 进程管理

每个进程都可能以两种方式存在的。前台与后台，所谓前台进程就是用户目前的屏幕上可以进行操作的。后台进程则是实际在操作，但由于屏幕上无法看到的进程，通常使用后台方式执行

### 显示系统执行的进程

ps  -a  ：显示当前终端的所有进程信息

ps -u   ：以用户的格式显示进程信息

ps  -x  ：显示后台进程运行的参数

ps  -ef：是以全格式显示当前所有的进程（查看父进程）

ps -ef | grep nginx(进程相关信息)

### 防火墙补充知识：

防火墙怎么开启特定端口呢

可以修改配置文件，用vim /etc/sysconfig/iptables修改配置文件

![image-20191114194517808](D:\学习笔记\linux\images\image-20191114194517808.png)

### ps显示的信息选项

PID ： 进程识别号

TTY ：终端机号

TIME：此进程所消CPU时间

CMD：正在执行的命令或进程名

STAT：进程状态：s，休眠，r，运行

### ps指令详解

指令说明

•SystemV展示风格

•USER：用户名称

•PID：进程号

•%CPU：进程占用CPU的百分比

•%MEM：进程占用物理内存的百分比

•VSZ：进程占用的虚拟内存大小（单位：KB）

•RSS：进程占用的物理内存大小（单位：KB）

•TT：终端名称,缩写.

•STAT：进程状态，其中S-睡眠，s-表示该进程是会话的先导进程，N-表示进程拥有比普通优先级更低的优先级，R-正在运行，D-短期等待，Z-僵死进程，T-被跟踪或者被停止等等•STARTED：进程的启动时间

•TIME：CPU时间，即进程使用CPU的总时间•COMMAND：启动进程所用的命令和参数，如果过长会被截断显示

•PPID：父进程ID



### 终止进程

若是某个进程执行一半需要停止时，或是已消了很大的系统资源时，此时可以考虑停止该进程。使用kill命令来完成此项任务。

kill   [选项]   进程号（功能描述：通过进程号杀死进程）

killall    进程名称 （功能描述：通过进程名称杀死进程，也支持通配符，这在系统因负载过大而变得很慢时很有用）

-9:表示强迫进程立即停止

杀掉终端：ps  -aux  |  grep  bash

kill -9 终端进程号

### 查看进程树pstree

pstree   [选项],可以更加直观的来看进程信息

-p:显示进程的PID

-u:显示进程的所属用户



### 服务(Service)管理

服务(service)本质就是进程，但是是运行在后台的，通常都会监听某个端口，等待其它程序的请求，比如(mysql,sshd防火墙等)，因此我们又称为守护进程，是Linux中非常重要的知识点

### 指令

service  服务名  [start  |  stop  |  restart  |  reload  |  status]

telnet测试某个端口: telnet  192.168.189.128 22

防火墙操作（centos6）：service iptables start | status

### 查看服务名shell文件（虚拟机启动时初始化的shell文件）

使用setup->系统服务就可以看到

/etc/init.d/服务名称

### chkconfig

通过chkconfig命令可以给每个服务的各个运行级别设置自启动/关闭

指令:

chkconfig  服务名 --list | grep XXX：查看服务

chkconfig  --level  5  服务名  on/off  :让该服务在5运行级别开启/关闭

### redis知识

可以通过 vi /etc/init.d/服务名 查看系统帮你创建服务是的shell文件



### 动态监控进程

top与ps命令很相似。它们都用来显示正在执行的进程。Top与ps最大的不同之处，在于top在执行一段时间可以更新正在运行的的进程

案例1.监视特定用户

1. top：输入此命令，按回车键，查看执行的进程。
2. u：然后输入“u”回车，再输入用户名，即可

案例2：终止指定的进程。

1. top：输入此命令，按回车键，查看执行的进程。
2. k：然后输入“k”回车，再输入要结束的进程ID号

案例3. 指定系统状态更新的时间(每隔10秒自动更新，默认是3秒)：

top  - d   10

### 查看系统网络情况netstat(重要)

netstat   [选项]   

netstat  -anp

netstat -ntlp

-an按一定顺序排列输出

-p显示哪个进程在调用





## RPM和YUM

### rpm包的管理

一种用于互联网下载包的打包及安装工具，它包含在某些Linux分发版中。它生成具有.RPM扩展名的文件。RPM是RedHatPackageManager（RedHat软件包管理工具）的缩写，类似windows的setup.exe，这一文件格式名称虽然打上了RedHat的标志，但理念是通用的。Linux的分发版本都有采用（suse,redhat,centos等等），可以算是公认的行业标准了

#### rpm包的简单查询指令

查询已安装的rpm列表     rpm    –qa   |   grep   xx

##### 其他查询指令

rpm -qa ：查询所安装的所有rpm包

rpm -q 软件包名：查询软件包是否安装

rpm -qi 软件包名：查询软件包信息

rpm   -ql   软件包名：查询软件包中的文件

rpm    -qf   文件全路径名  ：查询文件所属的软件包

#### 卸载rpm包

rpm   -e   RPM包的名称

rpm  -e  **--nodeps**  RPM包的名称：强制删除

#### 安装rpm包

rpm   -ivh    RPM包全路径名称

i=install   安装  

v=verbose    提示

h=hash   进度条



### yum

Yum是一个Shell前端软件包管理器。基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包。使用yum的前提是可以联网

#### 原理：

![1570591706483](C:\Users\wuhaotian\AppData\Roaming\Typora\typora-user-images\1570591706483.png)

查询yum服务器是否有需要安装的软件

yum   list   |    grep   xx软件列表

安装指定的yum包

yum   install    xxx   下载安装

